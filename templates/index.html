<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExoVision</title>
    <link rel="shortcut icon" href="static/favicon.ico" type="image/x-icon">
    <!-- <link rel="stylesheet" href="static/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="static/css/main.css">
    <link rel="stylesheet" href="static/css/transit.css">

</head>

<body>
    <div class="stars"></div>
    {% include 'components/chat.html' %}

    <div class="container">
        <header>
            <h1 class="logo">ExoVision </h1>
            <div style="margin: 16px; display: inline-block; justify-content: center; gap: 12px;">
                <a class="btn" href="/tales-from-the-stars">Tales from the stars
                </a>
            </div>
            <div style="margin: 16px; display: inline-block; justify-content: center; gap: 12px;">
                <a class="btn" href="/learn">want to learn more about exoplanets? </a>
            </div>
        </header>

        <div class="main-grid">
            <div class="card">
                <h2 class="card-title">
                    Data Input
                    <sup class="card-title-sup">
                        <a href="/model-info#what-data-do-we-use-to-identify-exoplanets" style="color: white;">
                            What data do we use to identify exoplanets?
                        </a>
                    </sup>
                </h2>
                <div class="hyperparameters">
                    <div class="input-group">
                        <label for="model-name">Available models
                            <select id="model-name">
                                {% for model in models %}
                                <option value="{{model}}">{{model}}</option>
                                {% endfor %}
                            </select>
                    </div>

                </div>
                <div class="tabs">
                    <div class="tab" onclick="switchTab('manual')">Manual Entry</div>
                    <div class="tab active" onclick="switchTab('upload')">File Upload</div>
                </div>

                <div id="manual-tab" class="tab-content ">
                    {% include 'components/manual-input-form.html' %}
                    <div id="prediction-results" style="display: none;">
                        <div class="prediction-result" id="result-display">
                            <h3 id="result-classification"></h3>
                            <div id="result-classification-message"></div>
                        </div>
                    </div>
                </div>

                <div id="upload-tab" class="tab-content active">
                    <form>
                        <div class="input-group">
                            <label>Upload Dataset (CSV)</label>
                            <div class="file-upload">
                                <input type="file" id="data-file" required accept=".csv"
                                    onchange="handleFileUpload(event)">
                                <label for="data-file" class="file-upload-label">
                                    <svg class="icon" style="margin-bottom: 10px;" viewBox="0 0 24 24">
                                        <path
                                            d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" />
                                    </svg>
                                    <p>Click to browse</p>
                                    <p style="font-size: 0.9rem; color: #888; margin-top: 5px;">Supports CSV
                                        formats
                                        <br>
                                        We Expect that the CSV file will contain the following fields:
                                    <p style="font-size: xx-small;">
                                        {{ required_features }}.
                                    </p>

                                    <br>
                                    Lines starting with '#' will be ignored as comments.
                                    We are assuming that ',' is used as delimiter.
                                    </p>
                                </label>
                            </div>
                        </div>
                        <button type="button" class="btn" onclick="processUploadedData()"
                            id="process-dataset-btn">Process Dataset</button>
                        <!-- inline-block -->
                        <div id="prediction-results" style="display: none;">
                            <div class="prediction-result" id="result-display">
                                <h3 id="result-classification."></h3>
                                <div id="result-classification-message"></div>
                            </div>
                        </div>
                        <div id="error-message" style="color: red;display: none;">
                            erorr
                        </div>
                    </form>
                </div>
            </div>
            <div class="card">
                <h2 class="card-title">
                    Model Statistics <a>
                    </a>
                </h2>
                <!-- Confusion Matrix -->
                <div class="chart-section">
                    <div class="chart-header">
                        <h3 class="chart-title">
                            <svg style="width: 24px; height: 24px; fill: currentColor;" viewBox="0 0 24 24">
                                <path d="M3,3H21V5H3V3M3,7H21V9H3V7M3,11H21V13H3V11M3,15H21V17H3V15M3,19H21V21H3V19Z" />
                            </svg>
                            Confusion Matrix
                        </h3>
                    </div>
                    <div class="confusion-matrix">
                        <div class="matrix-cell header">Predicted →<br>Actual ↓</div>
                        <div class="matrix-cell header">Confirmed</div>
                        <div class="matrix-cell header">Candidate</div>
                        <div class="matrix-cell header">False Positive</div>
                
                        <div class="matrix-cell header">Confirmed</div>
                        <div class="matrix-cell">
                            <div class="matrix-value" id="cm-tt">0</div>
                            <div class="matrix-label">True Positive</div>
                        </div>
                        <div class="matrix-cell">
                            <div class="matrix-value" id="cm-tc">0</div>
                            <div class="matrix-label">Misclassified</div>
                        </div>
                        <div class="matrix-cell">
                            <div class="matrix-value" id="cm-tf">0</div>
                            <div class="matrix-label">Misclassified</div>
                        </div>
                
                        <div class="matrix-cell header">Candidate</div>
                        <div class="matrix-cell">
                            <div class="matrix-value" id="cm-ct">0</div>
                            <div class="matrix-label">Misclassified</div>
                        </div>
                        <div class="matrix-cell">
                            <div class="matrix-value" id="cm-cc">0</div>
                            <div class="matrix-label">True Positive</div>
                        </div>
                        <div class="matrix-cell">
                            <div class="matrix-value" id="cm-cf">0</div>
                            <div class="matrix-label">Misclassified</div>
                        </div>
                
                        <div class="matrix-cell header">False Positive</div>
                        <div class="matrix-cell">
                            <div class="matrix-value" id="cm-ft">0</div>
                            <div class="matrix-label">Misclassified</div>
                        </div>
                        <div class="matrix-cell">
                            <div class="matrix-value" id="cm-fc">0</div>
                            <div class="matrix-label">Misclassified</div>
                        </div>
                        <div class="matrix-cell">
                            <div class="matrix-value" id="cm-ff">0</div>
                            <div class="matrix-label">True Negative</div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- customize a model section -->
            <div class="results-section">
                <h2 class="card-title">
                    Want to customize a model?
                </h2>

                <div class="hyperparameters">
                    <div class="input-group">
                        <div class="input-group">
                            <label for="custom-model-name">Model Name</label>
                            <input type="text" id="custom-model-name" required id="custom-model-name"
                                name="custom-model-name" placeholder="e.g., model-abcde">
                            <!-- TODO: remove the random name generator  -->
                            <!-- <script>

                                document.getElementById('custom-model-name').value = 'model-' + Math.random().toString(36).substring(2, 7);
                            </script> -->
                        </div>

                    </div>
                </div>

                <div class="input-group">
                    <label>Upload Datasets (CSV)</label>
                    <div class="file-upload">
                        <input type="file" id="custom-data-files" required multiple accept=".csv"
                            onchange="handleFileUpload(event)">
                        <label for="custom-data-files" class="file-upload-label">
                            <svg class="icon" style="margin-bottom: 10px;" viewBox="0 0 24 24">
                                <path
                                    d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" />
                            </svg>
                            <p>Click to browse</p>
                            <p style="font-size: 0.9rem; color: #888; margin-top: 5px;">
                                We Expect that the CSV file will contain the following fields:
                            <p style="font-size: xx-small;">
                                {{ required_features }}.
                            </p>
                            <br>
                            Lines starting with '#' will be ignored as comments.
                            We are assuming that ',' is used as delimiter.
                            </p>
                        </label>
                    </div>
                </div>
                <button type="button" class="btn btn-secondary" id="train-model-btn" onclick="trainModel()">Train
                    Model</button>
            </div>
                <div class="results-section">
                    <h3 style="color: #64b5f6; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <svg style="width: 24px; height: 24px; fill: currentColor;" viewBox="0 0 24 24">
                            <path d="M3,3H21V5H3V3M3,7H21V9H3V7M3,11H21V13H3V11M3,15H21V17H3V15M3,19H21V21H3V19Z" />
                        </svg>
                        Dataset Analysis Results
                    </h3>

                    <div id="csv-result-section">

                    </div>
                </div>
        </div>
        <!-- <script src="static/js/bootstrap.min.js"></script> -->
        <script src="static/js/chart.min.js"></script>
        <script src="static/js/chartjs-plugin-zoom.min.js"></script>
        <script src="static/js/main.js"></script>
        <script src="static/js/papaparse.min.js"></script>

</body>

</html>